module.exports = start;

const mysql = require('mysql');
const connection = mysql.createConnection({
    host : 'localhost',
    user : 'root',
    password : '879574764',
    database : 'QuestionSystem'
});

connection.connect();

function start(config){
    return (new API(connection));
};

function API(config,connection){
}

API.prototype.sql = function(sql,callback){
    //console.log('saferman.sql: execute');
    connection.query(sql,function(err,results){
        //console.log('saferman.sql: results is: '+results.length);
        if(err){
            console.log(err);
            console.log(err.stack);
        };

        if(callback != undefined){
            //console.log('saferman.sql: execute callback');
            callback(results);
        }
    });
}

API.prototype.format = function(sql,arr){
    ////console.log('saferman.format execute');
    var sql_string = connection.format(sql,arr);
    return sql_string;
}
