module.exports = answerAskQuestion;

function answerAskQuestion(answer,questionID,userID,callback){

    let config = this.config;
    addAnswer();


    function executeCallback(argumentOfCallback){
        if(callback!=undefined)
            callback(argumentOfCallback);
    }

    function addAnswer(){

        let sql = 'SELECT count(ID) FROM AnswerTable';

        config.modules['saferman'].sql(sql,function(results){
            let NextUsableID = results[0]['count(ID)'] + 1;

            initAnswerTable(NextUsableID);
            executeCallback();

            function initAnswerTable(NextUsableID){
                let sql = config.modules['saferman'].format(
                    'INSERT INTO AnswerTable (ID,questionID,userID,answer,score,state) VALUE (?,?,?,?,0,0)',
                    [NextUsableID,questionID,userID,answer]);
                config.modules['saferman'].sql(sql);
            }
        });

    };

}
