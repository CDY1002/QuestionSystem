module.exports = initUser;

function initUser(Name,callback){
    var config = this.config;

    var sql = 'SELECT count(ID) FROM PersonalInformation';

    config.modules['saferman'].sql(sql,function(results){
        var NextUsableID = results[0]['count(ID)'];

        sql = 'INSERT INTO PersonalInformation (ID,Name) VALUE (' + NextUsableID + ",'" + Name + "')";

        config.modules['saferman'].sql(sql,executeCallback);
        config.modules['rights_management'].initRightsOfUser(NextUsableID);

        function executeCallback(){
            if(callback!=undefined)
                callback();
        }
    });
}

