module.exports = isUsernameMatchPassword;

function isUsernameMatchPassword(Name,password,callback){
    var config = this.config;

    var sql = 'SELECT ID FROM PersonalInformation WHERE Name="' + Name + '"';

    config.modules['saferman'].sql(sql,function(results){
        if(results[0] != undefined){
            var ID = results[0].ID;

            sql = 'SELECT Shadow FROM ShadowTable WHERE ID=' + ID;

            config.modules['saferman'].sql(sql,function(results){

                if(results[0].Shadow == password){
                    executeCallback(ID);
                }else{
                    executeCallback(false);
                }

            })

        }else{
            executeCallback(false);
        }

        function executeCallback(argument){
            if(callback!=undefined)
                callback(argument);
        }
    });
}

